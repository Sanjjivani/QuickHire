{% extends "base.html" %}
{% block title %}Employer Dashboard - QuickHire{% endblock %}
{% block content %}
<div class="container-fluid px-0">
    <div class="row g-0">
        <!-- Modern Side Panel Navigation -->
        <div class="col-lg-3 col-xl-2">
            <div class="side-panel">
                <!-- Panel Header with User Info -->
                <div class="side-panel-header">
                    <div class="d-flex align-items-center">
                        <div class="employer-avatar me-3">
                            <i class="fas fa-building"></i>
                        </div>
                        <div>
                            <h6 class="mb-0 fw-bold">{{ current_user.employer_name }}</h6>
                            <small class="employer-role">Employer Account</small>
                        </div>
                    </div>
                </div>
                
                <!-- Main Navigation -->
                <div class="side-panel-body">
                    <nav class="side-nav">
                        <ul class="side-nav-list">
                            <li class="side-nav-item">
                                <a href="#dashboard" class="side-nav-link active" data-section="dashboard">
                                    <i class="fas fa-tachometer-alt me-3"></i>
                                    <span>Dashboard</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#post-job" class="side-nav-link" data-section="post-job">
                                    <i class="fas fa-plus-circle me-3"></i>
                                    <span>Post New Job</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#my-jobs" class="side-nav-link" data-section="my-jobs">
                                    <i class="fas fa-briefcase me-3"></i>
                                    <span>My Job Posts</span>
                                    <span class="nav-badge">{{ current_user.jobs | length }}</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#applications" class="side-nav-link" data-section="applications">
                                    <i class="fas fa-users me-3"></i>
                                    <span>Applications</span>
                                    <span class="nav-badge">{{ total_applicants }}</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#direct-hire" class="side-nav-link" data-section="direct-hire">
                                    <i class="fas fa-user-plus me-3"></i>
                                    <span>Direct Hire</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#hired-seekers" class="side-nav-link" data-section="hired-seekers">
                                    <i class="fas fa-user-check me-3"></i>
                                    <span>Hired Seekers</span>
                                </a>
                            </li>
                            <!-- Messages moved from top navbar to side panel -->
                            <li class="side-nav-item">
                                <a href="#messages" class="side-nav-link" data-section="messages">
                                    <i class="fas fa-comments me-3"></i>
                                    <span>Messages</span>
                                </a>
                            </li>
                            <li class="side-nav-item">
                                <a href="#profile" class="side-nav-link" data-section="profile">
                                    <i class="fas fa-user-edit me-3"></i>
                                    <span>My Profile</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                
                <!-- Panel Footer with Logout -->
                <div class="side-panel-footer">
                    <a href="{{ url_for('logout') }}" class="side-nav-link logout-link">
                        <i class="fas fa-sign-out-alt me-3"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="col-lg-9 col-xl-10">
            <div class="main-content-panel">
                <!-- Mobile Header with Toggle -->
                <div class="mobile-header d-lg-none">
                    <button class="btn side-panel-toggle" type="button">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h5 class="mb-0">Employer Dashboard</h5>
                </div>

                <!-- Dynamic Content Sections -->
                <div class="content-sections">
                    <!-- Dashboard Section -->
                    <section id="dashboard-section" class="content-section active">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard Overview
                            </h2>
                            <p class="section-subtitle">Welcome back! Here's your hiring overview.</p>
                        </div>

                        <!-- Statistics Cards -->
                        <div class="row g-4 mb-5">
                            <div class="col-md-6 col-xl-3">
                                <div class="stat-card-modern">
                                    <div class="stat-icon bg-primary">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 class="stat-number">{{ current_user.jobs | length }}</h3>
                                        <p class="stat-label">Active Jobs</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stat-card-modern">
                                    <div class="stat-icon bg-success">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 class="stat-number">{{ total_applicants }}</h3>
                                        <p class="stat-label">Total Applicants</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stat-card-modern">
                                    <div class="stat-icon bg-warning">
                                        <i class="fas fa-user-check"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 class="stat-number">
                                            {% set hired_count = [] %}
                                            {% for job in current_user.jobs %}
                                                {% for application in job.applications %}
                                                    {% if application.status == 'hired' %}
                                                        {% set _ = hired_count.append(1) %}
                                                    {% endif %}
                                                {% endfor %}
                                            {% endfor %}
                                            {{ hired_count | length }}
                                        </h3>
                                        <p class="stat-label">Hired Candidates</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="stat-card-modern">
                                    <div class="stat-icon bg-info">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 class="stat-number">
                                            {% set reviews_given = [] %}
                                            {% for job in current_user.jobs %}
                                                {% for review in job.reviews %}
                                                    {% if review.reviewer_id == current_user.user_id %}
                                                        {% set _ = reviews_given.append(1) %}
                                                    {% endif %}
                                                {% endfor %}
                                            {% endfor %}
                                            {{ reviews_given | length }}
                                        </h3>
                                        <p class="stat-label">Reviews Given</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="card-modern">
                                    <div class="card-header-modern">
                                        <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <a href="#post-job" class="btn-modern btn-primary-modern side-nav-trigger" data-section="post-job">
                                                <i class="fas fa-plus me-2"></i>Post New Job
                                            </a>
                                            <a href="#applications" class="btn-modern btn-outline-modern side-nav-trigger" data-section="applications">
                                                <i class="fas fa-users me-2"></i>View Applications
                                            </a>
                                            <a href="#direct-hire" class="btn-modern btn-outline-modern side-nav-trigger" data-section="direct-hire">
                                                <i class="fas fa-user-plus me-2"></i>Direct Hire
                                            </a>
                                            <a href="{{ url_for('jobs') }}" class="btn-modern btn-outline-modern">
                                                <i class="fas fa-search me-2"></i>Browse Job Market
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card-modern">
                                    <div class="card-header-modern">
                                        <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Recent Activity</h5>
                                    </div>
                                    <div class="card-body">
                                        {% if current_user.jobs %}
                                            <div class="activity-list">
                                                {% for job in current_user.jobs[-3:] %}
                                                <div class="activity-item">
                                                    <div class="activity-icon">
                                                        <i class="fas fa-briefcase"></i>
                                                    </div>
                                                    <div class="activity-content">
                                                        <strong>{{ job.title }}</strong>
                                                        <small class="text-muted">{{ job.applications | length }} applications</small>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        {% else %}
                                            <div class="text-center py-3">
                                                <i class="fas fa-briefcase fa-2x text-muted mb-2"></i>
                                                <p class="text-muted mb-0">No jobs posted yet</p>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Job Seekers Section -->
                        <div class="row g-4 mt-4">
                            <div class="col-12">
                                <div class="card-modern">
                                    <div class="card-header-modern">
                                        <h5 class="mb-0"><i class="fas fa-users me-2"></i>Recent Job Seekers</h5>
                                    </div>
                                    <div class="card-body">
                                        {% if recent_seekers %}
                                            <div class="row g-3">
                                                {% for seeker in recent_seekers %}
                                                    <div class="col-md-6 col-lg-4">
                                                        <div class="seeker-card-modern">
                                                            <div class="seeker-card-header">
                                                                <h6 class="mb-1">{{ seeker.jobseeker_name }}</h6>
                                                                {% if seeker.skills %}
                                                                <small class="text-muted">
                                                                    <i class="fas fa-tools me-1"></i>
                                                                    {{ seeker.skills.split(',')[0] if seeker.skills else 'No skills specified' }}
                                                                </small>
                                                                {% endif %}
                                                            </div>
                                                            <div class="seeker-card-meta">
                                                                <div class="seeker-meta-item">
                                                                    <i class="fas fa-map-marker-alt"></i>
                                                                    {{ seeker.location }}
                                                                </div>
                                                            </div>
                                                            <div class="seeker-card-actions">
                                                                <a href="{{ url_for('start_chat', jobseeker_id=seeker.id) }}" 
                                                                   class="btn-modern btn-primary-modern btn-sm">
                                                                    <i class="fas fa-comment me-1"></i>Chat
                                                                </a>
                                                                <a href="{{ url_for('profile', user_id=seeker.user.id) }}" 
                                                                   class="btn-modern btn-outline-modern btn-sm">
                                                                    <i class="fas fa-eye"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% else %}
                                            <div class="text-center py-4">
                                                <i class="fas fa-users fa-3x text-muted mb-3"></i>
                                                <h5 class="text-muted">No Job Seekers Yet</h5>
                                                <p class="text-muted">Start by posting a job or browsing job seekers.</p>
                                                <div class="d-flex gap-2 justify-content-center">
                                                    <a href="#post-job" class="btn-modern btn-primary-modern btn-sm side-nav-trigger" data-section="post-job">Post Job</a>
                                                    <a href="#direct-hire" class="btn-modern btn-outline-modern btn-sm side-nav-trigger" data-section="direct-hire">Browse Seekers</a>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Post Job Section -->
                    <section id="post-job-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-plus-circle me-2"></i>Post New Job
                            </h2>
                            <p class="section-subtitle">Create a new job listing to attract talented candidates</p>
                        </div>
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="card-modern">
                                    <div class="card-body">
                                        <p class="text-center text-muted mb-4">
                                            <i class="fas fa-arrow-right me-2"></i>
                                            Click below to create a new job posting
                                        </p>
                                        <div class="text-center">
                                            <a href="{{ url_for('post_job') }}" class="btn-modern btn-primary-modern">
                                                <i class="fas fa-plus me-2"></i>Go to Job Posting Form
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- My Jobs Section -->
                    <section id="my-jobs-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-briefcase me-2"></i>My Job Posts
                            </h2>
                            <p class="section-subtitle">Manage your active job listings</p>
                        </div>
                        
                        {% if current_user.jobs %}
                        <div class="row g-4">
                            {% for job in current_user.jobs %}
                            <div class="col-lg-6">
                                <div class="job-card-modern">
                                    <div class="job-card-header">
                                        <h5 class="job-card-title">{{ job.title }}</h5>
                                        <span class="job-card-salary">â‚¹{{ "%.0f"|format(job.pay) }}</span>
                                    </div>
                                    <div class="job-card-meta">
                                        <div class="job-card-meta-item">
                                            <i class="fas fa-map-marker-alt"></i>
                                            {{ job.location }}
                                        </div>
                                        <div class="job-card-meta-item">
                                            <i class="fas fa-tools"></i>
                                            {{ job.required_skills }}
                                        </div>
                                        <div class="job-card-meta-item">
                                            <i class="fas fa-users"></i>
                                            {{ job.applications | length }} applicants
                                        </div>
                                    </div>
                                    <div class="job-card-actions">
                                        <a href="#applications" class="btn-modern btn-primary-modern btn-sm side-nav-trigger" data-section="applications">
                                            <i class="fas fa-eye me-1"></i>View Applicants
                                        </a>
                                        <small class="text-muted">
                                            Posted {{ job.posted_at.strftime('%b %d, %Y') }}
                                        </small>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="card-modern text-center py-5">
                            <div class="card-body">
                                <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                                <h4 class="text-muted mb-3">No Jobs Posted Yet</h4>
                                <p class="text-muted mb-4">Start hiring by posting your first job listing</p>
                                <a href="#post-job" class="btn-modern btn-primary-modern side-nav-trigger" data-section="post-job">
                                    <i class="fas fa-plus me-2"></i>Post Your First Job
                                </a>
                            </div>
                        </div>
                        {% endif %}
                    </section>

                    <!-- Applications Section -->
                    <section id="applications-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-users me-2"></i>Job Applications
                            </h2>
                            <p class="section-subtitle">Manage applications for your job posts</p>
                        </div>
                        <div class="text-center">
                            <a href="{{ url_for('applicants') }}" class="btn-modern btn-primary-modern">
                                <i class="fas fa-external-link-alt me-2"></i>View All Applications
                            </a>
                        </div>
                    </section>

                    <!-- Direct Hire Section -->
                    <section id="direct-hire-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-user-plus me-2"></i>Direct Hire
                            </h2>
                            <p class="section-subtitle">Browse and hire job seekers directly</p>
                        </div>
                        <div class="text-center">
                            <a href="{{ url_for('direct_hire') }}" class="btn-modern btn-primary-modern">
                                <i class="fas fa-external-link-alt me-2"></i>Browse Job Seekers
                            </a>
                        </div>
                    </section>

                    <!-- Hired Seekers Section -->
                    <section id="hired-seekers-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-user-check me-2"></i>Hired Seekers
                            </h2>
                            <p class="section-subtitle">View your directly hired job seekers</p>
                        </div>
                        <div class="text-center">
                            <a href="{{ url_for('hired_seekers') }}" class="btn-modern btn-primary-modern">
                                <i class="fas fa-external-link-alt me-2"></i>View Hired Seekers
                            </a>
                        </div>
                    </section>

                    <!-- Messages Section (moved from top navbar) -->
                    <section id="messages-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-comments me-2"></i>Messages
                            </h2>
                            <p class="section-subtitle">Chat with job seekers and manage conversations</p>
                        </div>
                        <div class="text-center">
                            <a href="{{ url_for('chat_home') }}" class="btn-modern btn-primary-modern">
                                <i class="fas fa-external-link-alt me-2"></i>Open Messages
                            </a>
                        </div>
                    </section>

                    <!-- Profile Section -->
                    <section id="profile-section" class="content-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-user-edit me-2"></i>My Profile
                            </h2>
                            <p class="section-subtitle">View and manage your employer profile</p>
                        </div>
                        <div class="text-center">
                            <a href="{{ url_for('profile', user_id=current_user.user_id) }}" class="btn-modern btn-primary-modern">
                                <i class="fas fa-external-link-alt me-2"></i>View My Profile
                            </a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* ===== EMPLOYER DASHBOARD STYLES ===== */

/* CSS Variables for consistent theming */
:root {
    --primary: #4361ee;
    --secondary: #3a0ca3;
    --success: #4cc9f0;
    --warning: #f72585;
    --danger: #e63946;
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --bg-card: #ffffff;
    --bg-tertiary: #f1f5f9;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-muted: #94a3b8;
    --border-color: #e2e8f0;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --gradient-primary: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --transition-fast: 0.2s ease;
    --transition-normal: 0.3s ease;
}

[data-theme="dark"] {
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-card: #1e293b;
    --bg-tertiary: #334155;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --text-muted: #64748b;
    --border-color: #334155;
}

/* Side Panel Container */
.side-panel {
    background: var(--bg-card);
    border-right: 1px solid var(--border-color);
    min-height: 100vh;
    position: sticky;
    top: 0;
    transition: all var(--transition-normal);
    z-index: 1000;
}

.side-panel-header {
    padding: 2rem 1.5rem 1.5rem;
    border-bottom: 1px solid var(--border-color);
}

.employer-avatar {
    width: 50px;
    height: 50px;
    background: var(--gradient-primary);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    transition: var(--transition-normal);
}

.employer-avatar:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

.employer-role {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.side-panel-body {
    padding: 1.5rem 0;
}

.side-panel-footer {
    padding: 1.5rem;
    border-top: 1px solid var(--border-color);
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-card);
}

/* Side Navigation */
.side-nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.side-nav-item {
    margin-bottom: 0.25rem;
}

.side-nav-link {
    display: flex;
    align-items: center;
    padding: 0.875rem 1.5rem;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all var(--transition-fast);
    border-left: 3px solid transparent;
    position: relative;
    font-weight: 500;
}

.side-nav-link:hover {
    background: rgba(67, 97, 238, 0.1);
    color: var(--primary);
    border-left-color: var(--primary);
    transform: translateX(4px);
}

.side-nav-link.active {
    background: rgba(67, 97, 238, 0.15);
    color: var(--primary);
    border-left-color: var(--primary);
    font-weight: 600;
}

.side-nav-link i {
    width: 20px;
    text-align: center;
    font-size: 1.1rem;
}

.nav-badge {
    background: var(--primary);
    color: white;
    border-radius: 20px;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: auto;
    min-width: 24px;
    text-align: center;
}

.logout-link {
    color: var(--danger) !important;
}

.logout-link:hover {
    background: rgba(239, 71, 111, 0.1) !important;
    color: var(--danger) !important;
    border-left-color: var(--danger) !important;
}

/* Main Content Panel */
.main-content-panel {
    background: var(--bg-primary);
    min-height: 100vh;
    padding: 2rem;
    transition: all var(--transition-normal);
}

.mobile-header {
    background: var(--bg-card);
    padding: 1rem;
    border-bottom: 1px solid var(--border-color);
    margin: -2rem -2rem 2rem -2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    position: sticky;
    top: 0;
    z-index: 999;
}

.side-panel-toggle {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 0.5rem;
    color: var(--text-primary);
    transition: var(--transition-fast);
}

.side-panel-toggle:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* Content Sections */
.content-sections {
    position: relative;
}

.content-section {
    display: none;
    animation: fadeInUp 0.5s ease-out;
}

.content-section.active {
    display: block;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border-color);
}

.section-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
}

.section-title i {
    color: var(--primary);
}

.section-subtitle {
    color: var(--text-secondary);
    margin-bottom: 0;
    font-size: 1.1rem;
}

/* Statistics Cards */
.stat-card-modern {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.stat-card-modern::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    transform: scaleX(0);
    transition: transform var(--transition-normal);
}

.stat-card-modern:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
}

.stat-card-modern:hover::before {
    transform: scaleX(1);
}

.stat-card-modern .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    flex-shrink: 0;
    transition: var(--transition-normal);
}

.stat-card-modern:hover .stat-icon {
    transform: scale(1.1);
}

.stat-card-modern .stat-content {
    flex-grow: 1;
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
}

.stat-label {
    color: var(--text-secondary);
    font-weight: 500;
    margin-bottom: 0;
    font-size: 0.9rem;
}

/* Color variants for stat icons */
.bg-primary { background: var(--primary); }
.bg-success { background: var(--success); }
.bg-warning { background: var(--warning); }
.bg-info { background: var(--info, #17a2b8); }

/* Card Modern Styles */
.card-modern {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    transition: all var(--transition-normal);
    height: 100%;
}

.card-modern:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
}

.card-header-modern {
    padding: 1.5rem 1.5rem 0;
    border-bottom: none;
    background: transparent;
}

.card-header-modern h5 {
    color: var(--text-primary);
    font-weight: 600;
    display: flex;
    align-items: center;
}

.card-body {
    padding: 1.5rem;
}

/* Activity List */
.activity-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem;
    border-radius: var(--radius-md);
    transition: background var(--transition-fast);
    border: 1px solid transparent;
}

.activity-item:hover {
    background: var(--bg-secondary);
    border-color: var(--border-color);
}

.activity-icon {
    width: 40px;
    height: 40px;
    background: var(--bg-secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    flex-shrink: 0;
    transition: var(--transition-fast);
}

.activity-item:hover .activity-icon {
    background: var(--primary);
    color: white;
    transform: scale(1.1);
}

.activity-content {
    flex-grow: 1;
}

.activity-content strong {
    color: var(--text-primary);
    display: block;
    margin-bottom: 0.25rem;
    font-weight: 600;
}

.activity-content small {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

/* Job Card Modern */
.job-card-modern {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    transition: all var(--transition-normal);
    height: 100%;
    position: relative;
    overflow: hidden;
}

.job-card-modern::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    transform: scaleX(0);
    transition: transform var(--transition-normal);
}

.job-card-modern:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
}

.job-card-modern:hover::before {
    transform: scaleX(1);
}

.job-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
    gap: 1rem;
}

.job-card-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    line-height: 1.3;
}

.job-card-salary {
    background: var(--gradient-primary);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.875rem;
    white-space: nowrap;
}

.job-card-meta {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.job-card-meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
    font-size: 0.875rem;
    background: var(--bg-secondary);
    padding: 0.375rem 0.75rem;
    border-radius: var(--radius-sm);
}

.job-card-meta-item i {
    color: var(--primary);
}

.job-card-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
}

/* Seeker Card Modern */
.seeker-card-modern {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 1.25rem;
    transition: all var(--transition-normal);
    height: 100%;
    position: relative;
}

.seeker-card-modern:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.seeker-card-header {
    margin-bottom: 1rem;
}

.seeker-card-header h6 {
    color: var(--text-primary);
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.seeker-card-meta {
    margin-bottom: 1rem;
}

.seeker-meta-item {
    color: var(--text-secondary);
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.seeker-card-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: space-between;
}

.seeker-card-actions .btn-modern {
    flex: 1;
}

.seeker-card-actions .btn-modern.btn-outline-modern {
    flex: 0 0 auto;
    width: auto;
}

/* Button Modern Styles */
.btn-modern {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-md);
    font-weight: 600;
    text-decoration: none;
    border: 2px solid transparent;
    transition: all var(--transition-normal);
    cursor: pointer;
    font-size: 0.9rem;
    font-family: inherit;
    text-align: center;
}

.btn-modern:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-modern.btn-sm {
    padding: 0.625rem 1.25rem;
    font-size: 0.85rem;
}

.btn-modern.btn-primary-modern {
    background: var(--gradient-primary);
    color: white;
    border: none;
}

.btn-modern.btn-primary-modern:hover {
    background: var(--primary);
    box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
}

.btn-modern.btn-outline-modern {
    background: transparent;
    color: var(--text-primary);
    border: 2px solid var(--border-color);
}

.btn-modern.btn-outline-modern:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(67, 97, 238, 0.05);
}

/* Responsive Design */
@media (max-width: 991.98px) {
    .side-panel {
        position: fixed;
        left: -100%;
        top: 0;
        z-index: 1040;
        width: 280px;
        transition: left 0.3s ease;
        box-shadow: var(--shadow-lg);
    }
    
    .side-panel.show {
        left: 0;
    }
    
    .main-content-panel {
        padding: 1rem;
    }
    
    .mobile-header {
        margin: -1rem -1rem 1rem -1rem;
    }
    
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1039;
        display: none;
    }
    
    .overlay.show {
        display: block;
    }
}

@media (max-width: 768px) {
    .stat-card-modern {
        flex-direction: column;
        text-align: center;
        padding: 1.25rem;
    }
    
    .stat-number {
        font-size: 1.75rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .side-panel-header {
        padding: 1.5rem 1rem 1rem;
    }
    
    .side-nav-link {
        padding: 0.75rem 1rem;
    }
    
    .seeker-card-actions {
        flex-direction: column;
    }
    
    .seeker-card-actions .btn-modern {
        width: 100%;
    }
    
    .job-card-header {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .job-card-salary {
        align-self: flex-start;
    }
}

@media (max-width: 576px) {
    .main-content-panel {
        padding: 0.5rem;
    }
    
    .mobile-header {
        margin: -0.5rem -0.5rem 1rem -0.5rem;
        padding: 0.75rem;
    }
    
    .stat-card-modern {
        padding: 1rem;
    }
    
    .stat-number {
        font-size: 1.5rem;
    }
    
    .seeker-card-modern {
        padding: 1rem;
    }
    
    .job-card-actions {
        flex-direction: column;
        gap: 0.5rem;
        align-items: flex-start;
    }
    
    .section-header {
        margin-bottom: 1.5rem;
    }
    
    .section-title {
        font-size: 1.375rem;
    }
}
</style>

<script>
// Side Panel Navigation Functionality
document.addEventListener('DOMContentLoaded', function() {
    // Section switching
    const navLinks = document.querySelectorAll('.side-nav-link');
    const contentSections = document.querySelectorAll('.content-section');
    const sidePanelTriggers = document.querySelectorAll('.side-nav-trigger');
    
    function switchSection(sectionId) {
        // Hide all sections
        contentSections.forEach(section => {
            section.classList.remove('active');
        });
        
        // Show target section
        const targetSection = document.getElementById(sectionId + '-section');
        if (targetSection) {
            targetSection.classList.add('active');
        }
        
        // Update active nav link
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-section') === sectionId) {
                link.classList.add('active');
            }
        });
        
        // Close mobile side panel
        if (window.innerWidth < 992) {
            document.querySelector('.side-panel').classList.remove('show');
            document.querySelector('.overlay')?.classList.remove('show');
        }
        
        // Scroll to top of section
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // Update browser history
        history.pushState(null, null, `#${sectionId}`);
    }
    
    // Nav link click events
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const sectionId = this.getAttribute('data-section');
            switchSection(sectionId);
        });
    });
    
    // Side panel trigger click events
    sidePanelTriggers.forEach(trigger => {
        trigger.addEventListener('click', function(e) {
            e.preventDefault();
            const sectionId = this.getAttribute('data-section');
            switchSection(sectionId);
        });
    });
    
    // Mobile side panel toggle
    const sidePanelToggle = document.querySelector('.side-panel-toggle');
    if (sidePanelToggle) {
        sidePanelToggle.addEventListener('click', function() {
            const sidePanel = document.querySelector('.side-panel');
            sidePanel.classList.toggle('show');
            
            // Add overlay for mobile
            if (window.innerWidth < 992) {
                let overlay = document.querySelector('.overlay');
                if (!overlay) {
                    overlay = document.createElement('div');
                    overlay.className = 'overlay';
                    document.body.appendChild(overlay);
                }
                overlay.classList.toggle('show');
            }
        });
    }
    
    // Close side panel when clicking outside on mobile
    document.addEventListener('click', function(e) {
        if (window.innerWidth < 992) {
            const sidePanel = document.querySelector('.side-panel');
            const toggleBtn = document.querySelector('.side-panel-toggle');
            const overlay = document.querySelector('.overlay');
            
            if (sidePanel.classList.contains('show') && 
                !sidePanel.contains(e.target) && 
                !toggleBtn.contains(e.target)) {
                sidePanel.classList.remove('show');
                overlay?.classList.remove('show');
            }
        }
    });
    
    // Handle browser back/forward buttons
    window.addEventListener('popstate', function() {
        const hash = window.location.hash.substring(1) || 'dashboard';
        switchSection(hash);
    });
    
    // Initialize with correct section based on URL hash
    const initialSection = window.location.hash.substring(1) || 'dashboard';
    switchSection(initialSection);
    
    // Add animation to cards on scroll
    const animateOnScroll = function() {
        const elements = document.querySelectorAll('.stat-card-modern, .job-card-modern, .seeker-card-modern, .card-modern');
        
        elements.forEach(element => {
            const elementTop = element.getBoundingClientRect().top;
            const elementVisible = 150;
            
            if (elementTop < window.innerHeight - elementVisible) {
                element.style.opacity = "1";
                element.style.transform = "translateY(0)";
            }
        });
    };
    
    // Set initial state for animation
    document.querySelectorAll('.stat-card-modern, .job-card-modern, .seeker-card-modern, .card-modern').forEach(element => {
        element.style.opacity = "0";
        element.style.transform = "translateY(20px)";
        element.style.transition = "opacity 0.6s ease, transform 0.6s ease";
    });
    
    // Run on load and scroll
    window.addEventListener('load', animateOnScroll);
    window.addEventListener('scroll', animateOnScroll);
    
    // Add loading states for buttons
    document.querySelectorAll('.btn-modern').forEach(button => {
        button.addEventListener('click', function(e) {
            if (this.href && !this.href.startsWith('#')) {
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Loading...';
                this.disabled = true;
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.disabled = false;
                }, 2000);
            }
        });
    });
});
</script>
{% endblock %}